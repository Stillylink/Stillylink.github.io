<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Анонимный чат — Private</title>

  <!-- Основные стили -->
  <link rel="stylesheet" href="/style.css">

  <!-- Локальные стили (были внутри HTML, оставляем как отдельный файл) -->
  <link rel="stylesheet" href="private.css">
</head>

<body>
<header class="navbar">
  <div class="logo">StillyLink</div>
  <div class="nav-links" style="margin-left:auto">
    <a href="/">Главная</a>
    <a href="/anonymous/">Аноним</a>
  </div>
</header>

<main class="private-container">

  <div class="chat-header">
    <div class="title">Анонимный чат — 1 на 1</div>
    <div class="chat-actions">
      <div id="statusText" style="color:var(--text-secondary)">—</div>
      <button class="finish-btn" id="finishBtn">Завершить чат</button>
    </div>
  </div>

  <!-- Поисковый экран -->
  <div id="searchScreen" class="searching hidden">
    <div class="spinner"></div>
    <div style="text-align:center">
      <div style="font-weight:600; color:var(--accent)">Поиск собеседника...</div>
      <div style="color:var(--text-secondary); margin-top:6px">Подбираем активного пользователя. Ожидайте</div>
    </div>
    <div style="display:flex;gap:10px">
      <button class="btn" id="cancelSearch">Отменить</button>
    </div>
  </div>

  <!-- Окно чата -->
  <div id="chatWindow" class="chat-window hidden" aria-live="polite">
    <div class="messages" id="messages" role="log" aria-live="polite"></div>

    <div class="composer">
      <input type="file" id="photoInput" accept="image/*" class="hidden">
      <button title="Добавить фото" class="tool-btn" id="photoBtn">📷</button>
      <button title="Emoji" class="tool-btn" id="emojiBtn">😊</button>
      <textarea id="textInput" class="text-input" placeholder="Введите сообщение (Enter — отправить, Shift+Enter — новая строка)"></textarea>
      <button id="sendBtn" class="btn" style="width:auto;padding:10px 14px">Отправить</button>
    </div>
  </div>

  <!-- Экран после завершения -->
  <div id="endScreen" class="card hidden end-screen">
    <div style="font-size:18px;color:var(--accent);font-weight:700">Чат завершен</div>
    <div style="color:var(--text-secondary)">Вы можете начать новый чат или выйти обратно на страницу анонимных.</div>
    <div style="display:flex;gap:10px;margin-top:8px">
      <button class="btn" id="newChatBtn">Начать новый чат</button>
      <a class="btn" href="/anonymous/" id="exitBtn" style="background:transparent;color:var(--text-secondary);border:1px solid var(--border)">Выйти</a>
    </div>
  </div>

  <!-- Модальное окно -->
  <div id="modal" class="hidden">
    <div class="modal-backdrop">
      <div class="modal" role="dialog" aria-modal="true">
        <h3>Завершить чат?</h3>
        <p>После завершения беседа будет закрыта. Вы сможете начать новую или выйти.</p>
        <div class="row" style="justify-content:flex-end">
          <button class="tool-btn" id="modalCancel">Отмена</button>
          <button class="btn" id="modalFinish">Завершить</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Эмодзи -->
  <div id="emojiPanel" class="emoji-panel hidden" aria-hidden="true">
    <button class="tool-btn emoji">😀</button>
    <button class="tool-btn emoji">😂</button>
    <button class="tool-btn emoji">😍</button>
    <button class="tool-btn emoji">😢</button>
    <button class="tool-btn emoji">😮</button>
    <button class="tool-btn emoji">👍</button>
    <button class="tool-btn emoji">🙏</button>
    <button class="tool-btn emoji">🔥</button>
    <button class="tool-btn emoji">🤝</button>
    <button class="tool-btn emoji">🎉</button>
  </div>

</main>

<footer class="footer">© StillyLink</footer>

<script type="module" src="script.js"></script>
</body>
</html>
